(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{227:function(e,t,a){e.exports=a(414)},232:function(e,t,a){},294:function(e,t){},296:function(e,t){},331:function(e,t){},332:function(e,t){},414:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),o=a.n(s),i=(a(232),a(21)),c=a.n(i),l=a(97),u=a(212),d=a(63),p=a(218),h=a(213),f=a(43),m=a(217),g=a(130),b=a(457),v=a(473),k=a(472),y=a(459),z=a(460),w=a(466),E=a(471),x=a(468),S=a(461),C=a(467),O=a(463),j=a(464),D=a(470),L=a(462),I=a(465),P=a(75),T=a(215),W=a.n(T),A=a(216),V=a.n(A),B=a(131),K=a.n(B),U=a(214);function F(e,t){return e.map(function(e){return e[t]}).map(function(e,t,a){return a.indexOf(e)===t&&t}).filter(function(t){return e[t]}).map(function(t){return e[t]})}a(408).config(),K.a.setApiKey(Object({NODE_ENV:"production",PUBLIC_URL:"."}).API_KEY);var N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={basketOpen:!1,order:[],latData:0,lngData:0,filterOpen:!1,filterValue:"",postalCode:"",pizzas:[],pizzasLength:0,restaurantsLength:0,bestToWorst:null,loadingDone:!0,globalIngredients:[],unwanted:[]},a.executeSearch=a.executeSearch.bind(Object(f.a)(a)),a.sortUp=a.sortUp.bind(Object(f.a)(a)),a.sortDown=a.sortDown.bind(Object(f.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"calculateVariable",value:function(e,t){var a,n,r=e.indexOf("["),s=e.slice(r).replace("[","").replace("]","").replace(" ","").replace("cm",""),o=s.slice(s.search(/[0-9]/g));return a=3.14*(2^o)/(t/100),n=3,Number.parseFloat(a).toPrecision(n)}},{key:"sortUp",value:function(){var e=this.state.pizzas.sort(function(e,t){return e.variable-t.variable});this.setState({pizzas:e.reverse(),bestToWorst:!0})}},{key:"sortDown",value:function(){var e=this.state.pizzas.sort(function(e,t){return e.variable-t.variable});this.setState({pizzas:e,bestToWorst:!1})}},{key:"executeSearch",value:function(){var e=this;this.setState({globalIngredients:[],pizzas:[],pizzasLength:0,restaurantsLength:0,bestToWorst:null});var t=0,a=0;Object(l.a)(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{K.a.fromAddress(e.state.postalCode).then(function(e){var n=e.results[0].geometry.location,r=n.lat,s=n.lng;t=r,a=s},function(e){console.error(e)})}catch(r){console.error(r)}case 1:case"end":return n.stop()}},n)}))(),this.setState({loadingDone:!1,latData:t,lngData:a});var n=[],r=[];Object(l.a)(c.a.mark(function s(){var o,i,l,u,d,p,h,f,m,b,v,k,y,z,w,E,x,S,C,O,j,D;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,o=new g.Takeaway,s.next=4,o.getCountryById("PL");case 4:return i=s.sent,s.next=7,i.getRestaurants("",t,a);case 7:l=s.sent,u=!0,d=!1,p=void 0,s.prev=11,h=l[Symbol.iterator]();case 13:if(u=(f=h.next()).done){s.next=64;break}return m=f.value,s.next=17,m.getMenu(t,a);case 17:if(!m.categories){s.next=61;break}b=!0,v=!1,k=void 0,s.prev=21,y=m.categories[Symbol.iterator]();case 23:if(b=(z=y.next()).done){s.next=47;break}for(w=z.value,E=!0,x=!1,S=void 0,s.prev=28,C=w.products[Symbol.iterator]();!(E=(O=C.next()).done);E=!0)(j=O.value).name&&j.name.toLowerCase().includes("pizza")&&(j.name.toLowerCase().includes("cm")||j.options[0]&&j.options[0].choices[0].data.name.toLowerCase().includes("cm"))&&(r.includes(m)||r.push(m),n.push({product:j,ingredients:e.parseIngredients(j.data.description),from:m.name,variable:e.calculateVariable(j.data.name,j.data.deliveryPrice)}),e.setState({pizzasLength:n.length,restaurantsLength:r.length}));s.next=36;break;case 32:s.prev=32,s.t0=s.catch(28),x=!0,S=s.t0;case 36:s.prev=36,s.prev=37,E||null==C.return||C.return();case 39:if(s.prev=39,!x){s.next=42;break}throw S;case 42:return s.finish(39);case 43:return s.finish(36);case 44:b=!0,s.next=23;break;case 47:s.next=53;break;case 49:s.prev=49,s.t1=s.catch(21),v=!0,k=s.t1;case 53:s.prev=53,s.prev=54,b||null==y.return||y.return();case 56:if(s.prev=56,!v){s.next=59;break}throw k;case 59:return s.finish(56);case 60:return s.finish(53);case 61:u=!0,s.next=13;break;case 64:s.next=70;break;case 66:s.prev=66,s.t2=s.catch(11),d=!0,p=s.t2;case 70:s.prev=70,s.prev=71,u||null==h.return||h.return();case 73:if(s.prev=73,!d){s.next=76;break}throw p;case 76:return s.finish(73);case 77:return s.finish(70);case 78:s.next=83;break;case 80:s.prev=80,s.t3=s.catch(0),console.error(s.t3);case 83:return s.prev=83,D=[],n.forEach(function(e){e.ingredients.forEach(function(e){D.includes({name:e,checked:!0})||D.push({name:e,checked:!0})})}),e.setState({pizzas:n,loadingDone:!0,globalIngredients:F(D,"name")}),s.finish(83);case 88:case"end":return s.stop()}},s,null,[[0,80,83,88],[11,66,70,78],[21,49,53,61],[28,32,36,44],[37,,39,43],[54,,56,60],[71,,73,77]])}))()}},{key:"executeSearchGps",value:function(){var e=this;this.setState({globalIngredients:[],postalCode:"\ud83d\udccd Twoja lokalizacja \ud83d\udccd",pizzas:[],pizzasLength:0,restaurantsLength:0,bestToWorst:null});var t=this.props.coords.latitude,a=this.props.coords.longitude;this.setState({loadingDone:!1,latData:t,lngData:a});var n=[],r=[];Object(l.a)(c.a.mark(function s(){var o,i,l,u,d,p,h,f,m,b,v,k,y,z,w,E,x,S,C,O,j,D;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,o=new g.Takeaway,s.next=4,o.getCountryById("PL");case 4:return i=s.sent,s.next=7,i.getRestaurants("",t,a);case 7:l=s.sent,u=!0,d=!1,p=void 0,s.prev=11,h=l[Symbol.iterator]();case 13:if(u=(f=h.next()).done){s.next=64;break}return m=f.value,s.next=17,m.getMenu(t,a);case 17:if(!m.categories){s.next=61;break}b=!0,v=!1,k=void 0,s.prev=21,y=m.categories[Symbol.iterator]();case 23:if(b=(z=y.next()).done){s.next=47;break}for(w=z.value,E=!0,x=!1,S=void 0,s.prev=28,C=w.products[Symbol.iterator]();!(E=(O=C.next()).done);E=!0)(j=O.value).name&&j.name.toLowerCase().includes("pizza")&&(j.name.toLowerCase().includes("cm")||j.options[0]&&j.options[0].choices[0].data.name.toLowerCase().includes("cm"))&&(r.includes(m)||r.push(m),n.push({product:j,ingredients:e.parseIngredients(j.data.description),from:m.name,variable:e.calculateVariable(j.data.name,j.data.deliveryPrice)}),e.setState({pizzasLength:n.length,restaurantsLength:r.length}));s.next=36;break;case 32:s.prev=32,s.t0=s.catch(28),x=!0,S=s.t0;case 36:s.prev=36,s.prev=37,E||null==C.return||C.return();case 39:if(s.prev=39,!x){s.next=42;break}throw S;case 42:return s.finish(39);case 43:return s.finish(36);case 44:b=!0,s.next=23;break;case 47:s.next=53;break;case 49:s.prev=49,s.t1=s.catch(21),v=!0,k=s.t1;case 53:s.prev=53,s.prev=54,b||null==y.return||y.return();case 56:if(s.prev=56,!v){s.next=59;break}throw k;case 59:return s.finish(56);case 60:return s.finish(53);case 61:u=!0,s.next=13;break;case 64:s.next=70;break;case 66:s.prev=66,s.t2=s.catch(11),d=!0,p=s.t2;case 70:s.prev=70,s.prev=71,u||null==h.return||h.return();case 73:if(s.prev=73,!d){s.next=76;break}throw p;case 76:return s.finish(73);case 77:return s.finish(70);case 78:s.next=83;break;case 80:s.prev=80,s.t3=s.catch(0),console.error(s.t3);case 83:return s.prev=83,D=[],n.forEach(function(e){e.ingredients.forEach(function(e){D.includes({name:e,checked:!0})||D.push({name:e,checked:!0})})}),e.setState({pizzas:n,loadingDone:!0,globalIngredients:F(D,"name"),latData:t,lngData:a}),s.finish(83);case 88:case"end":return s.stop()}},s,null,[[0,80,83,88],[11,66,70,78],[21,49,53,61],[28,32,36,44],[37,,39,43],[54,,56,60],[71,,73,77]])}))()}},{key:"parseIngredients",value:function(e){var t=e.replace(/ i /,", ").replace(". ",", ").slice(2).split(", "),a=[];return t.forEach(function(e){return a.push("z "+e)}),a}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{PaperProps:{style:{overflow:"hidden"}},open:!0,fullScreen:!0},r.a.createElement(y.a,{style:{textAlign:"center"}},r.a.createElement(E.a,{boxShadow:4},r.a.createElement(z.a,{style:{paddingBottom:0}},"Kalkulator op\u0142acalno\u015bci pizzy"),r.a.createElement("br",null),r.a.createElement(P.a,{variant:"subtitle2"},"Made by Daks"),r.a.createElement(D.a,{inputProps:{style:{textAlign:"center",fontSize:"larger"}},style:{width:"70%",paddingTop:50},placeholder:"Wpisz adres / Kod pocztowy",value:this.state.postalCode,onFocus:"\ud83d\udccd Twoja lokalizacja \ud83d\udccd"===this.state.postalCode&&function(){return e.setState({postalCode:""})},onChange:function(t){return e.setState({postalCode:t.target.value})}}),r.a.createElement("br",null),r.a.createElement(L.a,{style:{padding:16,margin:16,fontSize:"large"},color:"primary",variant:"contained",onClick:function(){return e.executeSearch(e.state.postalCode)}},"Wyszukaj i oblicz"),r.a.createElement(L.a,{style:{padding:16,margin:16,fontSize:"large"},color:"primary",variant:"contained",onClick:function(){e.executeSearchGps(e.state.postalCode)}},r.a.createElement(W.a,null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{anchor:"left",onClose:function(){return e.setState({filterOpen:!e.state.filterOpen})},PaperProps:{style:{width:250}},open:this.state.filterOpen},r.a.createElement(L.a,{onClick:function(){return e.setState({filterOpen:!e.state.filterOpen})}},"Zamknij filtr"),r.a.createElement(D.a,{style:{padding:16},placeholder:"Wyszukaj sk\u0142adnik",value:this.state.filterValue,onChange:function(t){return e.setState({filterValue:t.target.value})}}),r.a.createElement(S.a,null,this.state.loadingDone&&this.state.globalIngredients.length>0&&this.state.globalIngredients.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{style:{display:!t.name.includes(e.state.filterValue)&&"none"}},r.a.createElement(k.a,{checked:t.checked,onChange:function(){var n=e.state;n.globalIngredients[a].checked=!t.checked,n.unwanted=n.globalIngredients.filter(function(e){return!e.checked}),e.setState({newState:n})}}),r.a.createElement(j.a,{primary:t.name})))}))),r.a.createElement(v.a,{anchor:"right",onClose:function(){return e.setState({basketOpen:!e.state.basketOpen})},PaperProps:{style:{width:250}},open:this.state.basketOpen},r.a.createElement(L.a,{onClick:function(){return e.setState({basketOpen:!e.state.basketOpen})}},"Zamknij koszyk"),r.a.createElement(S.a,null,this.state.order.length>0&&this.state.order.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{button:!0,onClick:function(){var a=e.state.order.filter(function(e){return e!==t});e.setState({order:a})},style:{backgroundColor:a%2!==0?"#fff":"#eee"}},r.a.createElement(j.a,{style:{textAlign:"start"},primary:t.product.data.name+" - "+t.from,secondary:t.product.data.description}),r.a.createElement(j.a,{style:{textAlign:"end"},primary:t.variable+"cm2 / 1z\u0142",secondary:"Ca\u0142kowity Koszt: "+t.product.data.deliveryPrice/100+"z\u0142"})))})),r.a.createElement(P.a,{variant:"button"},"Ca\u0142kowity koszt zam\xf3wienia razem z dostaw\u0105 =",r.a.createElement("b",null," ",this.state.order.length>0?this.state.order.reduce(function(e,t){return e+t.product.data.deliveryPrice/100},0):0,"z\u0142"))),this.state.loadingDone&&this.state.pizzas.length>0&&r.a.createElement(P.a,{variant:"h6"},this.state.pizzasLength," wy\u015bwietlanych pozycji z"," ",this.state.restaurantsLength," restauracji"),r.a.createElement("br",null),0!==this.state.pizzas.length&&r.a.createElement("div",null,r.a.createElement(L.a,{variant:"outlined",style:{backgroundColor:!0===this.state.bestToWorst&&"#b5b5b5"},onClick:function(){return e.sortUp()}},"\u2191 Od Najlepszych \u2191")," ",r.a.createElement(L.a,{variant:"outlined",onClick:function(){return e.setState({filterOpen:!e.state.filterOpen})}},r.a.createElement("b",null," Otw\xf3rz filtr "))," ",r.a.createElement(L.a,{variant:"outlined",style:{backgroundColor:!1===this.state.bestToWorst&&"#b5b5b5"},onClick:function(){return e.sortDown()}},"\u2193 Od Najgorszych \u2193"))),r.a.createElement(S.a,null,this.state.loadingDone&&this.state.pizzas.length>0&&this.state.pizzas.map(function(t,a){return r.a.createElement(r.a.Fragment,null,!e.state.unwanted.some(function(e){return t.ingredients.includes(e.name)})&&r.a.createElement(O.a,{button:!0,onClick:function(){if(e.state.order.includes(t)){var a=e.state.order.filter(function(e){return e!==t});e.setState({order:a})}else{var n=e.state;n.order.push(t),e.setState({newState:n})}},key:a,style:{backgroundColor:e.state.order.includes(t)?a%2!==0?"#bbdefb":"#90caf9":a%2!==0?"#fff":"#eee"}},r.a.createElement(j.a,{style:{textAlign:"start"},primary:t.product.data.name+" - "+t.from,secondary:t.product.data.description}),r.a.createElement(j.a,{style:{textAlign:"end"},primary:t.variable+"cm2 / 1z\u0142",secondary:"Ca\u0142kowity Koszt: "+t.product.data.deliveryPrice/100+"z\u0142"})))}),!this.state.loadingDone&&0===this.state.pizzas.length&&r.a.createElement("div",{style:{paddingTop:30}},r.a.createElement("div",null,r.a.createElement(I.a,{style:{width:"10%",height:"10%"}})),r.a.createElement("div",{style:{paddingTop:30}},r.a.createElement(P.a,{variant:"h5"},"Trwa \u0142adowanie. Do tej pory za\u0142adowano"," ",this.state.pizzasLength," pozycji z"," ",this.state.restaurantsLength," restauracji"))))),r.a.createElement(w.a,null,r.a.createElement(P.a,{style:{position:"absolute",color:"#666",top:1,right:2,fontSize:"10px"}},"0.7v"),r.a.createElement(C.a,{onClick:function(){return e.setState({basketOpen:!e.state.basketOpen})},style:{position:"absolute",bottom:16,right:16},color:"primary"},r.a.createElement(x.a,{color:"secondary",invisible:0===this.state.order.length,badgeContent:this.state.order.length},r.a.createElement(V.a,null)))))}}]),t}(r.a.Component),M=Object(U.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,suppressLocationOnMount:!1})(N);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[227,1,2]]]);
//# sourceMappingURL=main.360136bd.chunk.js.map